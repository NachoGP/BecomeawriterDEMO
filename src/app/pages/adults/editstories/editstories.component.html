<body id="page-top">
  <mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer class="example-sidenav" mode="side">
      <a class="navbar-brand js-scroll-trigger">
        <span class="d-none d-lg-block">
          <img class="img-fluid mx-auto mb-2 logo" src="../../assets/img/logo-be.png" (click)="goToMainMenu()" />
        </span>
      </a>
      <div class="d-flex justify-content-center">
        <button type="button" mat-button (click)="drawer.toggle()" class="menu-btn">
          <mat-icon svgIcon="menu_close" matTooltip="Cerrar Menú" [matTooltipShowDelay]="500"
            matTooltipPosition="below">
          </mat-icon>
        </button>
      </div>
      <br />
      <div class="d-flex justify-content-center">
        <button type="button" mat-button (click)="newStory()" class="menu-btn">
          <mat-icon svgIcon="add_white" matTooltip="Nuevo Relato" [matTooltipShowDelay]="500"
            matTooltipPosition="below">
          </mat-icon>
        </button>
      </div>
      <br />
      <div class="d-flex justify-content-center">
        <button type="button" mat-button (click)="goToMainMenu()" class="menu-btn">
          <mat-icon svgIcon="menu-main-white" matTooltip="Menu Principal" [matTooltipShowDelay]="500"
            matTooltipPosition="below">
          </mat-icon>
        </button>
      </div>
      <br />
      <div class="d-flex justify-content-center">
        <button type="button" mat-button (click)="goToChallenge()" class="menu-btn">
          <mat-icon svgIcon="challenge-white" matTooltip="Ir a Desafío" [matTooltipShowDelay]="500"
            matTooltipPosition="below">
          </mat-icon>
        </button>
      </div>
      <br />
      <a class="btn btn-outline-primary back" [routerLink]="['/allstories']">Publicados</a>
      <br />
      <div class="d-flex justify-content-center log-menu">
        <button type="button" mat-button (click)="exitModal()" class="menu-btn">
          <mat-icon svgIcon="logout" matTooltip="Salir" [matTooltipShowDelay]="500" matTooltipPosition="below">
          </mat-icon>
        </button>
      </div>
    </mat-drawer>

    <div class="container-fluid p-0">
      <div class="example-sidenav-content">
        <button type="button" mat-button (click)="drawer.toggle()">
          <mat-icon svgIcon="menu_open"></mat-icon>
        </button>
      </div>
      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="experience">
        <div class="my-auto">
          <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <section class="w-100">
              <div class="resume-item d-flex flex-column flex-md-row">
                <div class="resume-content mr-auto animated fadeIn slow ">
                  <div class="d-flex">
                    <div class="col-6">
                      <h1>Tu relato, {{ getUser }}</h1>
                      <mat-accordion>
                        <mat-expansion-panel (click)="Ocultarpropuestahist()">
                          <mat-expansion-panel-header>
                            <mat-panel-title>
                              PROPUESTA ORIGINAL DEL RELATO:
                            </mat-panel-title>
                            <mat-panel-description>
                              {{ arrayRelatoUno.titulo }}
                            </mat-panel-description>
                          </mat-expansion-panel-header>
                          <div *ngIf="mostrarprop1" class="alert propuesta-marco col-12">
                            <p>GÉNERO: {{ arreglo.genero }}</p>
                            <p>PERSONAJE: {{ arreglo.personaje }}</p>
                            <p>SUSTANTIVO: {{ arreglo.sustantivo }}</p>
                            <p>TEMA: {{ arreglo.tema }}</p>
                            <p>LUGAR: {{ arreglo.localizacion }}</p>
                          </div>

                          <div *ngIf="mostrarprop2" class="alert propuesta-marco col-12">
                            <p>{{ arreglo.completa }}</p>
                            <img class="image-propuesta"
                              [src]="arreglo.imagen ? arreglo.imagen :'' " />
                          </div>
                          <br />
                        </mat-expansion-panel>
                        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                          <mat-expansion-panel-header>
                            <mat-panel-title>
                              COMENTARIOS del PROFESOR
                            </mat-panel-title>
                            <mat-panel-description>
                              <span><img src="../../assets/img/profe-become.png" /></span>
                            </mat-panel-description>
                          </mat-expansion-panel-header>
                          <p *ngIf="nota2">
                            {{ arrayRelatoUno.notas }}
                          </p>
                          <p *ngIf="nota" class="valoration">
                            Valoración: {{ arrayRelatoUno.puntaje ? arrayRelatoUno.puntaje : "Pendiente"  }}
                          </p>
                        </mat-expansion-panel>
                      </mat-accordion>
                    </div>
                    <div class="col-6">
                      <h3 class="cat">Categoría del relato: {{ arrayRelatoUno.categoria }} minutos</h3>
                      <h4 class="mb-2">
                        <span class="nrel heescrito"> Desafío </span>{{arrayRelatoUno.reto}}
                      </h4>
                      <mat-card>
                        <div class="ncategories col-12">
                          <div class="col-6">
                            <button type="button" mat-button>
                              <h5 class="cat-head">DESCARGAR</h5>
                              <span>.pdf</span>
                            </button>
                          </div>
                          <div class="col-6 align-self-center">
                            <h5 class="cat-head">Valoración</h5>
                            <h3 class="mx-auto">{{ arrayRelatoUno.puntaje }}</h3>
                          </div>
                        </div>
                      </mat-card>
                      <div class="col-12 mt-2 d-flex justify-content-end">
                        <p class="stars">
                          ( min: 1 ⭐ , máx: 5 ⭐⭐⭐⭐⭐ )
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Data del usuario -->

              <div class="my-auto mt-3">
                <section class="mt-4">
                  <section class="z-depth-1 custom-textarea" id="exampleFormControlTextarea4" rows="10">
                      <div class="resume-content d-flex paragraph-story custom-border">
                        <p class="subheading">TÍTULO:</p>
                        <p class="subheading ml-3">{{ arrayRelatoUno.titulo }}</p>
                        <hr>
                      </div>

                    <p class="paragraph-story mt-5">{{ arrayRelatoUno.relato }}</p>
                  </section>
                  <div class="d-flex flex-direction-column justify-content-center">
                    <p class="mt-3 publish">Publicado: {{ arrayRelatoUno.fecha | date }}</p>
                    <p class="mt-3 publish">Autor: {{ getUser }} </p>
                  </div>
                </section>
              </div>

              <button class="modal-button mx-auto d-flex justify-content-center" type="button" mat-button (click)="saveStory()">GUARDAR</button>
            </section>
          </div>
        </div>
      </section>
    </div>
  </mat-drawer-container>
</body>